{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Epstein Studio</title>
    <link rel="icon" href="{% static 'epstein_ui/favicon.ico' %}" type="image/x-icon" />
    <link rel="stylesheet" href="{% static 'epstein_ui/style.css' %}?v=2" />
  </head>
  <body data-auth="{% if request.user.is_authenticated %}1{% else %}0{% endif %}" data-user="{{ request.user.username|default:'' }}">
    <div class="page">
      <header class="topbar">
        <div class="topbar-row">
          <a href="/" class="brand">Epstein Studio</a>
          <div class="topbar-actions">
            {% if request.user.is_authenticated %}
              <a class="btn btn-secondary" href="/about/">About</a>
              <details class="account-menu">
                <summary class="account-button" aria-label="Account">
                  <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="7" r="4"></circle>
                    <path d="M4 20c1.7-3.6 5-6 8-6s6.3 2.4 8 6"></path>
                  </svg>
                  <span class="notif-dot hidden" aria-hidden="true"></span>
                </summary>
                <div class="account-dropdown">
                  <div class="account-username">{{ request.user.username }}</div>
                  <a class="account-link" href="/notifications/">Notifications <span class="notif-dot hidden" aria-hidden="true"></span></a>
                  <a class="account-link" href="/logout/">Logout</a>
                </div>
              </details>
            {% else %}
              <a class="btn btn-secondary" href="/about/">About</a>
              <a class="btn" href="/login/">Participate</a>
            {% endif %}
          </div>
        </div>
      </header>

      <main class="browse-layout">
        <div class="browse-header">
          <div>
            <div class="file-title">
              Browse PDF Files <span id="browseCount" class="browse-count">(0)</span>
            </div>
          </div>
          <div class="browse-header-actions">
            <div class="search-wrap">
              <input id="browseSearch" type="text" placeholder="Search PDF File..." />
              <button id="browseSearchBtn" class="btn browse-search-btn" type="button">Search</button>
            </div>
            <select id="browseSort" class="btn btn-secondary" aria-label="Sort">
              <option value="ann_most" selected>Most Annotations</option>
              <option value="name">Alphanumerical</option>
              <option value="promising">Most Promising</option>
              <option value="least">Least Promising</option>
              <option value="ann_least">Least Annotations</option>
            </select>
            <button id="browseRandom" class="btn btn-secondary" type="button">Random File</button>
          </div>
        </div>
        <div id="browseList" class="browse-list"></div>
        <div class="browse-actions">
          <button id="browseMore" class="btn btn-secondary" type="button">Load More</button>
        </div>
      </main>
    </div>
    <script src="{% static 'epstein_ui/browse.js' %}?v=1"></script>
  </body>
</html>
